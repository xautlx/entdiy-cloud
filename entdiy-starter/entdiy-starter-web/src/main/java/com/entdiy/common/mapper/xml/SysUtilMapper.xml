<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.entdiy.common.mapper.SysUtilMapper">

    <!-- 数据已存在（唯一性）校验sql语句 -->
    <select id="duplicateCheckCountSql" resultType="Long" parameterType="com.entdiy.common.model.DuplicateCheckVo">
        SELECT COUNT(*) FROM ${tableName} WHERE
        <foreach collection="fieldPairs" index="key" item="val" separator="AND">
            ${key}=#{val}
        </foreach>
        <if test="dataId != null and dataId != ''">
            and id &lt;&gt; #{dataId}
        </if>
    </select>

</mapper>
